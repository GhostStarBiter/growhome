#ifndef ONEWIRE_H
#define ONEWIRE_H

#include "stm32f10x.h"

typedef struct
{
    TIM_TypeDef*  timer;
    GPIO_TypeDef* gpio_port;
    uint16_t      gpio_pin;
    IRQn_Type     EXTIchannel;
    uint32_t      EXTI_line;
} onewire_init_t;


//--------------------------------------------------------------------------------------------------
/// @brief
/// @param
/// @param
/// @param
//--------------------------------------------------------------------------------------------------
void onewire_init
(
    onewire_init_t* init_struct
);


//--------------------------------------------------------------------------------------------------
/// @brief
//--------------------------------------------------------------------------------------------------
void onewire_measure(void);


//--------------------------------------------------------------------------------------------------
/// @brief
/// @return
//--------------------------------------------------------------------------------------------------
uint16_t onewire_get_temperature(void);


//--------------------------------------------------------------------------------------------------
/// @brief
/// @return
//--------------------------------------------------------------------------------------------------
uint16_t onewire_get_humidity(void);


#endif // ONEWIRE_H
